---
title: AEM Sites Optimizer - Guide d’intégration du contrôle en amont
description: Découvrez les opportunités de contrôle en amont et comment configurer l’analyse en amont dans AEM Sites Optimizer.
source-git-commit: 0a6ddcdfd369253500067b31617facfb7f38b656
workflow-type: tm+mt
source-wordcount: '488'
ht-degree: 6%

---


# Opportunités de contrôle en amont

![Opportunités de contrôle en amont ](./assets/preflight/hero.png){align="center"}

<span class="preview">AEM Sites Optimizer Preflight analyse les données techniques et les performances de votre page et anticipe et détecte les opportunités avant leur publication. Il utilise l’IA générative pour suggérer des optimisations.</span>

## Opportunités

<!-- CARDS

* ../documentation/opportunities/invalid-or-missing-metadata.md
  {title=Canonical}
  {image=../assets/common/card-link.png}
* ../documentation/opportunities/broken-internal-links.md
  {title=Broken Internal Links}
  {image=../assets/common/card-link.png}
* ../documentation/opportunities/invalid-or-missing-metadata.md
  {title=Metatags}
  {image=../assets/common/card-code.png}
* ../documentation/opportunities/invalid-or-missing-metadata.md
  {title=H1 count}
  {image=../assets/common/card-code.png}
* ../documentation/opportunities/accessibility-issues.md
  {title=Accessibility}
  {image=../assets/common/card-puzzle.png}

-->
<!-- START CARDS HTML - DO NOT MODIFY BY HAND -->
<div class="columns">
    <div class="column is-half-tablet is-half-desktop is-one-third-widescreen" aria-label="Canonical">
        <div class="card" style="height: 100%; display: flex; flex-direction: column; height: 100%;">
            <div class="card-image">
                <figure class="image x-is-16by9">
                    <a href="../documentation/opportunities/invalid-or-missing-metadata.md" title="Canonique" target="_blank" rel="referrer">
                        <img class="is-bordered-r-small" src="../assets/common/card-link.png" alt="Canonique"
                             style="width: 100%; aspect-ratio: 16 / 9; object-fit: cover; overflow: hidden; display: block; margin: auto;">
                    </a>
                </figure>
            </div>
            <div class="card-content is-padded-small" style="display: flex; flex-direction: column; flex-grow: 1; justify-content: space-between;">
                <div class="top-card-content">
                    <p class="headline is-size-6 has-text-weight-bold">
                        <a href="../documentation/opportunities/invalid-or-missing-metadata.md" target="_blank" rel="referrer" title="Canonique">Canonique</a>
                    </p>
                    <p class="is-size-6">Découvrez l’opportunité canonique et comment l’utiliser pour améliorer l’optimisation du moteur de recherche (SEO) et éviter les problèmes de contenu en double.</p>
                </div>
                <a href="../documentation/opportunities/invalid-or-missing-metadata.md" target="_blank" rel="referrer" class="spectrum-Button spectrum-Button--outline spectrum-Button--primary spectrum-Button--sizeM" style="align-self: flex-start; margin-top: 1rem;">
<span class="spectrum-Button-label has-no-wrap has-text-weight-bold">En savoir plus</span>
</a>
            </div>
        </div>
    </div>
    <div class="column is-half-tablet is-half-desktop is-one-third-widescreen" aria-label="Broken Internal Links">
        <div class="card" style="height: 100%; display: flex; flex-direction: column; height: 100%;">
            <div class="card-image">
                <figure class="image x-is-16by9">
                    <a href="../documentation/opportunities/broken-internal-links.md" title="Liens internes rompus" target="_blank" rel="referrer">
                        <img class="is-bordered-r-small" src="../assets/common/card-link.png" alt="Liens internes rompus"
                             style="width: 100%; aspect-ratio: 16 / 9; object-fit: cover; overflow: hidden; display: block; margin: auto;">
                    </a>
                </figure>
            </div>
            <div class="card-content is-padded-small" style="display: flex; flex-direction: column; flex-grow: 1; justify-content: space-between;">
                <div class="top-card-content">
                    <p class="headline is-size-6 has-text-weight-bold">
                        <a href="../documentation/opportunities/broken-internal-links.md" target="_blank" rel="referrer" title="Liens internes rompus">Liens internes rompus</a>
                    </p>
                    <p class="is-size-6">Découvrez l’opportunité de liens internes rompus et comment l’utiliser pour identifier et corriger les liens rompus ou problématiques sur votre site web.</p>
                </div>
                <a href="../documentation/opportunities/broken-internal-links.md" target="_blank" rel="referrer" class="spectrum-Button spectrum-Button--outline spectrum-Button--primary spectrum-Button--sizeM" style="align-self: flex-start; margin-top: 1rem;">
<span class="spectrum-Button-label has-no-wrap has-text-weight-bold">En savoir plus</span>
</a>
            </div>
        </div>
    </div>
    <div class="column is-half-tablet is-half-desktop is-one-third-widescreen" aria-label="Metatags">
        <div class="card" style="height: 100%; display: flex; flex-direction: column; height: 100%;">
            <div class="card-image">
                <figure class="image x-is-16by9">
                    <a href="../documentation/opportunities/invalid-or-missing-metadata.md" title="Metatags" target="_blank" rel="referrer">
                        <img class="is-bordered-r-small" src="../assets/common/card-code.png" alt="Metatags"
                             style="width: 100%; aspect-ratio: 16 / 9; object-fit: cover; overflow: hidden; display: block; margin: auto;">
                    </a>
                </figure>
            </div>
            <div class="card-content is-padded-small" style="display: flex; flex-direction: column; flex-grow: 1; justify-content: space-between;">
                <div class="top-card-content">
                    <p class="headline is-size-6 has-text-weight-bold">
                        <a href="../documentation/opportunities/invalid-or-missing-metadata.md" target="_blank" rel="referrer" title="Metatags">Métadonnées</a>
                    </p>
                    <p class="is-size-6">Découvrez l’opportunité des balises de métadonnées et comment l’utiliser pour optimiser les métadonnées de votre page pour de meilleures performances d’optimisation du moteur de recherche (SEO).</p>
                </div>
                <a href="../documentation/opportunities/invalid-or-missing-metadata.md" target="_blank" rel="referrer" class="spectrum-Button spectrum-Button--outline spectrum-Button--primary spectrum-Button--sizeM" style="align-self: flex-start; margin-top: 1rem;">
<span class="spectrum-Button-label has-no-wrap has-text-weight-bold">En savoir plus</span>
</a>
            </div>
        </div>
    </div>
    <div class="column is-half-tablet is-half-desktop is-one-third-widescreen" aria-label="H1 count">
        <div class="card" style="height: 100%; display: flex; flex-direction: column; height: 100%;">
            <div class="card-image">
                <figure class="image x-is-16by9">
                    <a href="../documentation/opportunities/invalid-or-missing-metadata.md" title="Nombre de H1" target="_blank" rel="referrer">
                        <img class="is-bordered-r-small" src="../assets/common/card-code.png" alt="Nombre de H1"
                             style="width: 100%; aspect-ratio: 16 / 9; object-fit: cover; overflow: hidden; display: block; margin: auto;">
                    </a>
                </figure>
            </div>
            <div class="card-content is-padded-small" style="display: flex; flex-direction: column; flex-grow: 1; justify-content: space-between;">
                <div class="top-card-content">
                    <p class="headline is-size-6 has-text-weight-bold">
                        Nombre de <a href="../documentation/opportunities/invalid-or-missing-metadata.md" target="_blank" rel="referrer" title="Nombre de H1">H1 </a>
                    </p>
                    <p class="is-size-6">Découvrez l’opportunité du nombre de H1 et comment l’utiliser pour garantir une structure d’en-tête appropriée et l’optimisation de l’optimisation du SEO.</p>
                </div>
                <a href="../documentation/opportunities/invalid-or-missing-metadata.md" target="_blank" rel="referrer" class="spectrum-Button spectrum-Button--outline spectrum-Button--primary spectrum-Button--sizeM" style="align-self: flex-start; margin-top: 1rem;">
<span class="spectrum-Button-label has-no-wrap has-text-weight-bold">En savoir plus</span>
</a>
            </div>
        </div>
    </div>
    <div class="column is-half-tablet is-half-desktop is-one-third-widescreen" aria-label="Accessibility">
        <div class="card" style="height: 100%; display: flex; flex-direction: column; height: 100%;">
            <div class="card-image">
                <figure class="image x-is-16by9">
                    <a href="../documentation/opportunities/accessibility-issues.md" title="Accessibilité" target="_blank" rel="referrer">
                        <img class="is-bordered-r-small" src="../assets/common/card-puzzle.png" alt="Accessibilité"
                             style="width: 100%; aspect-ratio: 16 / 9; object-fit: cover; overflow: hidden; display: block; margin: auto;">
                    </a>
                </figure>
            </div>
            <div class="card-content is-padded-small" style="display: flex; flex-direction: column; flex-grow: 1; justify-content: space-between;">
                <div class="top-card-content">
                    <p class="headline is-size-6 has-text-weight-bold">
                        <a href="../documentation/opportunities/accessibility-issues.md" target="_blank" rel="referrer" title="Accessibilité">Accessibilité</a>
                    </p>
                    <p class="is-size-6">Découvrez l’opportunité d’accessibilité et comment l’utiliser pour vous assurer que votre site web est accessible à tous les utilisateurs et utilisatrices.</p>
                </div>
                <a href="../documentation/opportunities/accessibility-issues.md" target="_blank" rel="referrer" class="spectrum-Button spectrum-Button--outline spectrum-Button--primary spectrum-Button--sizeM" style="align-self: flex-start; margin-top: 1rem;">
<span class="spectrum-Button-label has-no-wrap has-text-weight-bold">En savoir plus</span>
</a>
            </div>
        </div>
    </div>

</div>
<!-- END CARDS HTML - DO NOT MODIFY BY HAND -->

## Méthode de configuration

### Configuration de l’éditeur universel

1. Accédez à Extension Manager à partir de l’URL : https://experience.adobe.com/#/@org/aem/extension-manager/universal-editor .
2. Sélectionnez l’extension AEM Sites Optimizer Preflight et demandez à l’activer
3. L’équipe AEM activera l’extension pour votre organisation
4. Une fois cette opération effectuée, ouvrez une page dans l’éditeur universel, par exemple : https://author-p12345-e123456.adobeaemcloud.com/ui#/@org/aem/universal-editor/canvas/author-p12345-e123456.adobeaemcloud.com/content/site/subscription.html
5. L’extension Contrôle en amont est visible dans le rail latéral
6. Cliquez sur l’extension de contrôle en amont dans le rail latéral pour lancer l’audit de contrôle en amont pour la page active

### Configuration de l&#39;aperçu basé sur les documents

#### Étape 1 : activer Sidekick avec le bouton de contrôle en amont

Ajoutez la configuration suivante à `/tools/sidekick/config.json` dans votre référentiel GitHub :

```json
{
  "plugins": [
    {
      "id": "preflight",
      "titleI18n": {
        "en": "Preflight"
      },
      "environments": ["preview"],
      "event": "preflight"
    }
  ]
}
```

#### Étape 2 : création du script d’intégration Sidekick

Créez des `/tools/sidekick/aem-sites-optimizer-preflight.js` avec le contenu suivant :

```javascript
(function () {
  let isAEMSitesOptimizerPreflightAppLoaded = false;
  function loadAEMSitesOptimizerPreflightApp() {
    const script = document.createElement('script');
    script.src = 'https://experience.adobe.com/solutions/OneAdobe-aem-sites-optimizer-preflight-mfe/static-assets/resources/sidekick/client.js?source=plugin';
    script.onload = function () {
      isAEMSitesOptimizerPreflightAppLoaded = true;
    };
    script.onerror = function () {
      console.error('Error loading AEMSitesOptimizerPreflightApp.');
    };
    document.head.appendChild(script);
  }

  function handlePluginButtonClick() {
    if (!isAEMSitesOptimizerPreflightAppLoaded) {
      loadAEMSitesOptimizerPreflightApp();
    }
  }

  // Sidekick V1 extension support
  const sidekick = document.querySelector('helix-sidekick');
  if (sidekick) {
    sidekick.addEventListener('custom:preflight', handlePluginButtonClick);
  } else {
    document.addEventListener('sidekick-ready', () => {
      document.querySelector('helix-sidekick')
        .addEventListener('custom:preflight', handlePluginButtonClick);
    }, { once: true });
  }

  // Sidekick V2 extension support
  const sidekickV2 = document.querySelector('aem-sidekick');
  if (sidekickV2) {
    sidekickV2.addEventListener('custom:preflight', handlePluginButtonClick);
  } else {
    document.addEventListener('sidekick-ready', () => {
      document.querySelector('aem-sidekick')
        .addEventListener('custom:preflight', handlePluginButtonClick);
    }, { once: true });
  }
}());
```

#### Étape 3 : mettre à jour le fichier de scripts

Ajoutez l’instruction d’importation suivante à la fonction `loadLazy()` dans `/scripts/scripts.js` pour les URL de prévisualisation, comme illustré ci-dessous :

```javascript
if (window.location.href.includes('.aem.page')) {
   import('../tools/sidekick/aem-sites-optimizer-preflight.js');
}
```

Désormais, le bouton Contrôle en amont doit être visible dans Sidekick.

#### Étape 4 : exécuter l’audit

Ouvrez l’URL d’aperçu (*.aem.page) de la page contrôlée. Cliquez sur le bouton Contrôle en amont de Sidekick.

### Configuration d’AEM Cloud Service

Vous pouvez utiliser l’option bookmarklet pour tester le contrôle en amont dans les environnements de page et de sandbox d’AEM Cloud Service.

<!-- Drag the button below to your Bookmarks Bar to get started. -->

Appuyez sur **Ctrl+Maj+B** (Windows) ou **Cmd+Maj+B** (Mac) pour afficher la barre des signets. Cliquez avec le bouton droit sur la barre des signets et sélectionnez « Nouvelle page » ou « Ajouter un signet ». Dans le champ d’adresse, copiez le code ci-dessous.

<!-- **Drag this link to your Bookmarks Bar:**

<a href="javascript:(function(){const script=document.createElement('script');script.src='https://experience.adobe.com/solutions/OneAdobe-aem-sites-optimizer-preflight-mfe/static-assets/resources/sidekick/client.js?source=bookmarklet&target-source=aem-cloud-service';document.head.appendChild(script);})();">Preflight</a> -->

**Copiez ce code et créez un signet :**

```
javascript:(function(){const script=document.createElement('script');script.src='https://experience.adobe.com/solutions/OneAdobe-aem-sites-optimizer-preflight-mfe/static-assets/resources/sidekick/client.js?source=bookmarklet&target-source=aem-cloud-service';document.head.appendChild(script);})();
```

Une fois le signet ajouté, ouvrez l’URL d’aperçu (*.aem.page) de la page contrôlée. Cliquez sur le signet Contrôle en amont pour lancer l’audit de contrôle en amont.

## Bonnes pratiques

Lors de l’utilisation du contrôle en amont, tenez compte des points suivants :

* Exécutez les audits de contrôle en amont sur toutes les pages d’évaluation/de prévisualisation avant de les publier.
* Traitez d’abord les problèmes à fort impact (liens rompus, balises H1 manquantes, liens non sécurisés).
* Activez l’authentification pour les environnements d’évaluation protégés.
* Examinez et implémentez les suggestions de balises méta pour de meilleures performances d’optimisation du moteur de recherche.
